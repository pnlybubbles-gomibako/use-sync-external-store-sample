(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5673:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(7721)}])},7721:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return d}});var n=r(1874),i=r(9953);var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fetcher=e,this.state={type:"ready"},this.listeners=[]}var e=t.prototype;return e.getStateOrThrow=function(){if(void 0!==this.cache)return this.cache;if("pending"===this.state.type)throw this.state.promise;if("error"===this.state.type)throw this.state.error;if("ready"===this.state.type)throw this.revalidate();return function(t){throw new Error("unreachable (".concat(JSON.stringify(t),")"))}(this.state)},e.revalidate=function(){var t=this;"pending"===this.state.type&&this.state.abortController.abort();var e=new AbortController,r=this.fetcher(e.signal).then((function(e){t.cache=e,t.state={type:"ready"},t.triggerChange()})).catch((function(e){t.state={type:"error",error:e}}));return this.state={type:"pending",promise:r,abortController:e},r},e.triggerChange=function(){var t=!0,e=!1,r=void 0;try{for(var n,i=this.listeners[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){(0,n.value)()}}catch(a){e=!0,r=a}finally{try{t||null==i.return||i.return()}finally{if(e)throw r}}},e.subscribe=function(t){var e=this;return this.listeners.push(t),function(){var r=e.listeners.indexOf(t);-1!==r&&e.listeners.splice(r,1)}},e.clearCache=function(){this.cache=void 0,this.state={type:"ready"},this.triggerChange()},t}(),c=new Map;function o(t,e){var r=c.get(t),n=null!==r&&void 0!==r?r:new a(e);return void 0===r&&c.set(t,n),[(0,i.useSyncExternalStore)((0,i.useCallback)((function(t){return n.subscribe(t)}),[n]),(function(){return n.getStateOrThrow()})),{revalidate:(0,i.useCallback)((function(){return n.revalidate()}),[n]),clearCache:(0,i.useCallback)((function(){return n.clearCache()}),[n])}]}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,a=[],c=!0,o=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);c=!0);}catch(s){o=!0,i=s}finally{try{c||null==r.return||r.return()}finally{if(o)throw i}}return a}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=function(t){return fetch("https://catfact.ninja/fact",{signal:t}).then((function(t){return t.json()}))},h=function(){var t=l(o("cat",u),2),e=t[0],r=t[1],i=r.revalidate,a=r.clearCache;return(0,n.jsxs)("p",{children:[(0,n.jsx)("button",{onClick:i,children:"revalidate"})," ",(0,n.jsx)("button",{onClick:a,children:"clearCache"})," ",e.fact]})},f=function(){var t,e=l(o("timer",(t=500,function(e){return new Promise((function(r){var n=setTimeout((function(){return r(new Date)}),t);e.addEventListener("abort",(function(){return clearTimeout(n)}))}))})),2),r=e[0],i=e[1],a=i.revalidate,c=i.clearCache;return(0,n.jsxs)("p",{children:[(0,n.jsx)("button",{onClick:a,children:"revalidate"})," ",(0,n.jsx)("button",{onClick:c,children:"clearCache"})," timer finished at"," ",r.toISOString()]})};function d(){return(0,n.jsxs)("main",{children:[(0,n.jsx)("h1",{children:"useSyncExternalStoreSample"}),(0,n.jsx)("p",{children:"revalidate: \u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u305f\u30c7\u30fc\u30bf\u3092\u8868\u793a\u3057\u306a\u304c\u3089\u88cf\u3067\u30c7\u30fc\u30bf\u30d5\u30a7\u30c3\u30c1\u3092\u884c\u3046\u3002\u65b0\u3057\u3044\u30c7\u30fc\u30bf\u304c\u53d6\u5f97\u3067\u304d\u305f\u3089\u518d\u63cf\u753b\u3059\u308b\u3002"}),(0,n.jsx)("p",{children:"clearCache: \u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u305f\u30c7\u30fc\u30bf\u3092\u524a\u9664\u3057\u3001\u30ed\u30fc\u30c7\u30a3\u30f3\u30b0(fallback)\u3092\u8868\u793a\u3057\u306a\u304c\u3089\u30c7\u30fc\u30bf\u30d5\u30a7\u30c3\u30c1\u3092\u884c\u3046\u3002\u65b0\u3057\u3044\u30c7\u30fc\u30bf\u304c\u53d6\u5f97\u3067\u304d\u305f\u3089\u63cf\u753b(resume)\u3059\u308b\u3002"}),(0,n.jsx)(i.Suspense,{fallback:(0,n.jsx)("p",{children:"loading..."}),children:(0,n.jsx)(h,{})}),(0,n.jsx)(i.Suspense,{fallback:(0,n.jsx)("p",{children:"waiting timer..."}),children:(0,n.jsx)(f,{})})]})}}},function(t){t.O(0,[774,888,179],(function(){return e=5673,t(t.s=e);var e}));var e=t.O();_N_E=e}]);